<html>
<head>
    <script type="text/javascript">
      (function () {
        const isPrime = num => {
          for(let i = 2, s = Math.sqrt(num); i <= s; i++)
            if(num % i === 0) return false;
          return num !== 1 && num !== 0;
        }

        const removeFirstDigit = num => {
          return num.toString().substr(1);
        }
        const removeLastDigit = num => {
          return num.toString().slice(0, -1);
        }


        const istruncatedNumberFromLeft = num => {
          // console.log("--LEFT Truncating " + num + " ...");
          while (num) {
            // console.log("----Checking " + num);
            if (primes.indexOf(parseInt(num)) < 0) {
              // console.log("------" + num + " is not prime!");
              return false;
            }
            num = removeFirstDigit(num);
          }
          return true;
        }
        const istruncatedNumberFromRight = num => {
          // console.log("--RIGHT Truncating " + num + " ...");
          while (num) {
            // console.log("----Checking " + num);
            if (primes.indexOf(parseInt(num)) < 0) {
              // console.log("------" + num + " is not prime!");
              return false;
            }
            num = removeLastDigit(num);
          }
          return true;
        }

        const has0468Digits = num => {
          var number = num.toString();
          if (
            number.indexOf('0') >= 0
            || number.indexOf('0') >= 4
            || number.indexOf('0') >= 6
            || number.indexOf('0') >= 8
          ) {
            return true;
          }
          return false;
        }

        const isTruncatable = num => {
          /* A truncatable prime can only have digits 1, 3, 5, 7, 9
             or 2, because it is a prime number. */
          if (has0468Digits(num)) { return false; }

          /* Stop if you find all 11 truncatable primes. */
          // if (truncatablePrimes.length >= 11) { return false; };

          if (isPrime(num)) {
            // console.log(num + " is prime!");
            primes.push(num);
            if (istruncatedNumberFromLeft(num) && istruncatedNumberFromRight(num)) {
              console.log(num + " IS TRUNCATABLE!");
              truncatablePrimes.push(num);
            }
          }
        }

        const primes = [2, 3, 5, 7, 11, 13, 17, 19];
        const truncatablePrimes = [];
        const UPPER_LIMIT_FOR_LOOP = 999999;

        for (let i = 21; i < UPPER_LIMIT_FOR_LOOP; i+=2) {
          isTruncatable(i);
        }

        console.log(truncatablePrimes);

        const reducer = (accumulator, currentValue) => accumulator + currentValue;
        console.log(truncatablePrimes.reduce(reducer));

      })();
    </script>
</head>
<body>
  <a href="https://projecteuler.net/problem=37"/>Link to problem.</a>
</body>
</html>
